@import "tailwindcss";

:root {
  --background: #0a0a0a;
  --foreground: #e8e4df;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-inter);
}

body {
  background: var(--background);
  color: var(--foreground);
}

/* Smooth transitions for interactive elements */
button {
  transition: background-color 150ms, box-shadow 150ms;
}

button:hover {
  filter: brightness(1.1);
}

/* ═══ BOARD 3D & FRAME ═══ */

.board-perspective {
  perspective: 1200px;
}

.board-3d {
  transform: rotateX(2deg);
  transform-style: preserve-3d;
  transition: transform 300ms ease;
}

/* Wood textures */
.square-light {
  background: linear-gradient(135deg, #dbb882 0%, #c9a66b 50%, #d4ad72 100%);
}

.square-dark {
  background: linear-gradient(135deg, #7a5230 0%, #5c3d22 50%, #6e4a2c 100%);
}

.square-depth {
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.18), inset 0 -1px 1px rgba(255, 255, 255, 0.06);
}

/* Board frame */
.board-frame {
  background: linear-gradient(145deg, #4a3520, #3a2815, #4a3520);
  border: 2px solid #2a1a0d;
  border-radius: 6px;
  box-shadow:
    0 20px 60px rgba(0, 0, 0, 0.6),
    0 8px 20px rgba(0, 0, 0, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.06);
  padding: 24px;
}

.board-frame-label {
  color: #8a7055;
  font-size: 0.6rem;
  font-family: ui-monospace, monospace;
  font-weight: 600;
  letter-spacing: 0.03em;
  user-select: none;
}

/* ═══ INFLUENCE GLOW ═══ */

.influence-glow {
  transition: background 200ms ease, opacity 200ms ease;
  mix-blend-mode: screen;
}

@keyframes contest-pulse {
  0%, 100% { opacity: 0.65; }
  50% { opacity: 1; }
}

.contest-pulse {
  animation: contest-pulse 2.5s ease-in-out infinite;
}

/* ═══ CHECK PULSE ═══ */

@keyframes check-pulse {
  0%, 100% {
    box-shadow: inset 0 0 12px rgba(255, 50, 50, 0.5);
    background: rgba(255, 40, 40, 0.25);
  }
  50% {
    box-shadow: inset 0 0 24px rgba(255, 50, 50, 0.8);
    background: rgba(255, 40, 40, 0.4);
  }
}

.check-pulse {
  animation: check-pulse 1s ease-in-out infinite;
}

/* ═══ CAPTURE FLASH ═══ */

@keyframes capture-flash {
  0% { opacity: 0.85; }
  100% { opacity: 0; }
}

.capture-flash {
  background: radial-gradient(circle, rgba(255, 255, 200, 0.9) 0%, rgba(255, 200, 100, 0.4) 50%, transparent 80%);
  animation: capture-flash 400ms ease-out forwards;
}

/* ═══ FLOATING DUST PARTICLES ═══ */

@keyframes dust-1 {
  0% { transform: translate(0, 0); opacity: 0; }
  10% { opacity: 0.25; }
  80% { opacity: 0.15; }
  100% { transform: translate(30px, -120px); opacity: 0; }
}

@keyframes dust-2 {
  0% { transform: translate(0, 0); opacity: 0; }
  15% { opacity: 0.2; }
  85% { opacity: 0.1; }
  100% { transform: translate(-20px, -100px); opacity: 0; }
}

@keyframes dust-3 {
  0% { transform: translate(0, 0); opacity: 0; }
  10% { opacity: 0.15; }
  90% { opacity: 0.1; }
  100% { transform: translate(15px, -80px); opacity: 0; }
}

.dust-particles {
  position: absolute;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
}

.dust-particles::before,
.dust-particles::after {
  content: '';
  position: absolute;
  width: 2px;
  height: 2px;
  border-radius: 50%;
  background: rgba(255, 220, 180, 0.3);
}

.dust-particles::before {
  top: 70%;
  left: 25%;
  animation: dust-1 12s linear infinite;
}

.dust-particles::after {
  top: 80%;
  left: 65%;
  animation: dust-2 16s linear infinite 4s;
}

/* ═══ GLASS MORPHISM PANEL ═══ */

.glass-panel {
  background: rgba(16, 16, 16, 0.75);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: 12px;
  box-shadow: 0 4px 24px rgba(0, 0, 0, 0.3);
}

/* ═══ TOGGLE SWITCH ═══ */

.toggle-switch {
  width: 36px;
  height: 20px;
  background: rgba(255, 255, 255, 0.08);
  border-radius: 10px;
  position: relative;
  cursor: pointer;
  transition: background 200ms;
  flex-shrink: 0;
  border: 1px solid rgba(255, 255, 255, 0.06);
}

.toggle-switch.active {
  background: rgba(200, 149, 108, 0.35);
  border-color: rgba(200, 149, 108, 0.3);
}

.toggle-switch::after {
  content: '';
  position: absolute;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background: #666;
  top: 2px;
  left: 2px;
  transition: transform 200ms ease, background 200ms;
}

.toggle-switch.active::after {
  transform: translateX(16px);
  background: #c8956c;
}

/* ═══ PARCHMENT CARD ═══ */

.parchment-card {
  background: linear-gradient(145deg, rgba(40, 32, 20, 0.6), rgba(30, 24, 16, 0.8));
  border: 1px solid rgba(200, 149, 108, 0.12);
  border-radius: 8px;
  font-style: italic;
  position: relative;
  overflow: hidden;
}

.parchment-card::before {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(ellipse at 30% 50%, rgba(200, 149, 108, 0.06) 0%, transparent 70%);
  pointer-events: none;
}

/* ═══ CHECKMATE OVERLAY ═══ */

@keyframes checkmate-in {
  0% { opacity: 0; transform: scale(0.95); }
  100% { opacity: 1; transform: scale(1); }
}

.checkmate-overlay {
  animation: checkmate-in 500ms ease-out;
}

/* ═══ PIECE EYE (Knight) ═══ */

.piece-eye {
  fill: var(--piece-eye-color, #222);
}

.piece-slit {
  fill: var(--piece-slit-color, rgba(0, 0, 0, 0.2));
  stroke: none;
}

.piece-band {
  stroke: var(--piece-band-color, rgba(0, 0, 0, 0.15));
}

/* White piece overrides */
[data-piece-color="w"] .piece-eye { --piece-eye-color: #6b5a3e; }
[data-piece-color="w"] .piece-slit { --piece-slit-color: rgba(100, 80, 50, 0.25); }
[data-piece-color="w"] .piece-band { --piece-band-color: rgba(100, 80, 50, 0.2); }

/* Black piece overrides */
[data-piece-color="b"] .piece-eye { --piece-eye-color: #ccc; }
[data-piece-color="b"] .piece-slit { --piece-slit-color: rgba(200, 200, 200, 0.15); }
[data-piece-color="b"] .piece-band { --piece-band-color: rgba(200, 200, 200, 0.12); }

/* ═══ LEGAL MOVE DOT ═══ */

.legal-move-dot {
  background: radial-gradient(circle, rgba(80, 200, 120, 0.6) 30%, rgba(80, 200, 120, 0.15) 70%, transparent 100%);
  border-radius: 50%;
}

.legal-capture-ring {
  box-shadow:
    inset 0 0 0 3px rgba(80, 200, 120, 0.45),
    inset 0 0 8px rgba(80, 200, 120, 0.2);
}

/* ═══ LAST MOVE HIGHLIGHT ═══ */

.last-move-highlight {
  background: radial-gradient(circle, rgba(240, 200, 80, 0.3) 0%, rgba(240, 200, 80, 0.15) 60%, rgba(240, 200, 80, 0.05) 100%);
}

/* ═══ SELECTED SQUARE ═══ */

.selected-glow {
  box-shadow:
    inset 0 0 0 2px rgba(80, 144, 255, 0.6),
    inset 0 0 12px rgba(80, 144, 255, 0.25);
}

/* ═══ MOBILE PERFORMANCE GUARDS ═══ */
@media (max-width: 640px) {
  .board-perspective {
    perspective: none;
  }

  .board-3d {
    transform: none;
  }

  .board-frame {
    padding: 10px;
    border-radius: 4px;
  }

  .board-frame-label {
    font-size: 0.5rem;
  }

  .dust-particles {
    display: none;
  }

  .contest-pulse {
    animation: none;
    opacity: 0.9;
  }
}

/* ═══ REDUCED MOTION ACCESSIBILITY ═══ */
@media (prefers-reduced-motion: reduce) {
  .board-3d {
    transform: none;
    transition: none;
  }

  .contest-pulse,
  .check-pulse,
  .capture-flash,
  .dust-particles::before,
  .dust-particles::after {
    animation: none !important;
  }

  .influence-glow,
  .toggle-switch,
  .toggle-switch::after {
    transition: none !important;
  }

  .dust-particles {
    display: none;
  }
}
